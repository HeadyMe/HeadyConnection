services:
  - type: web
    name: heady-systems
    env: python
    buildCommand: pip install -r HeadySystems/requirements.txt
    startCommand: gunicorn -b 0.0.0.0:$PORT --chdir HeadySystems/heady_project/src api_server:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0

  - type: web
    name: heady-demo-kit
    env: python
    buildCommand: pip install -r heady_demo_kit/requirements.txt
    startCommand: gunicorn -b 0.0.0.0:$PORT --chdir heady_demo_kit/heady_project/src api_server:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0

  - type: web
    name: heady-admin-api
    env: node
    rootDir: apps/heady_admin_ui/backend
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: HEADY_ADMIN_TOKEN
        value: changeme

  - type: web
    name: heady-admin-ui
    env: static
    rootDir: apps/heady_admin_ui/frontend
    buildCommand: npm install && npm run build
    staticPublishPath: dist
